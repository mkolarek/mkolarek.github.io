{{ define "main" }}
<div class="home-hero">
  <div class="home-hero-image">
    {{ with .Params.profile_image }}
    <img src="{{ . }}" alt="{{ site.Title }} profile image">
    {{ else }}
    <!-- Fallback image if no profile_image is defined in front matter -->
    <img src="/images/profile.webm" alt="{{ site.Title }} profile image">
    {{ end }}
  </div>
  <div class="home-hero-content">
    <h1>{{ .Title }}</h1>
    <div style="text-align: justify;">{{ .Content }}</div>
    {{ with site.Params.resume }}<a href="/{{ . }}" target="_blank" rel="noopener">Resume</a>{{ end }} | 
    {{ with site.Params.email }}<a href="mailto:{{ . }}" target="_blank" rel="noopener">E-mail</a>{{ end }} | 
    {{ with site.Params.linkedin }}<a href="https://linkedin.com/in/{{ . }}" target="_blank"
      rel="noopener">LinkedIn</a>{{ end }} | 
    {{ with site.Params.github }}<a href="https://github.com/{{ . }}" target="_blank" rel="noopener">GitHub</a>{{ end }}
  </div>
</div>

{{ $posts := where site.RegularPages "Type" "posts" }}
{{ if gt (len $posts) 0 }}
<div class="recent-posts">
  <h2>Recent Posts</h2>
  {{ range first 5 $posts }}
  <article>
    <h3><a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></h3>
    {{ if not .Date.IsZero }}
    <div class="post-meta">
      <time datetime="{{ .Date.Format " 2006-01-02T15:04:05-07:00" }}">{{ .Date.Format "January 2, 2006" }}</time>
      {{ with .Params.tags }}
      <span class="meta-divider">·</span>
      <span class="mini-tags">
        {{ range first 3 . }}
        <a href="{{ (site.GetPage (printf "/tags/%s" .)).RelPermalink }}">{{ . }}</a>
        {{ end }}
      </span>
      {{ end }}
    </div>
    {{ end }}
    <div class="post-summary">{{ .Summary }}</div>
    <a href="{{ .RelPermalink }}" class="read-more">Read more →</a>
  </article>
  {{ end }}
</div>
{{ end }}
{{ end }}